{"ast":null,"code":"var _jsxFileName = \"/home/saisumasri/Desktop/FINAL_PROJECT/final/FRONTEND_CODE/src/Maps/Maps.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport maplibregl from \"maplibre-gl\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport LayerComponent from \"../Layers/LayerComponent\";\nimport \"../Maps/Maps.css\";\nimport SearchComponent from \"../Search/Search\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  const mapContainerRef = useRef(null);\n  const mapRef = useRef(null);\n  const markerRef = useRef([]);\n  const [currentStyle, setCurrentStyle] = useState(`${process.env.REACT_APP_MAPTILER_API_KEY}`);\n  const [selectedLocation, setSelectedLocation] = useState({\n    lat: 17.4478,\n    lon: 78.3541\n  });\n\n  // Define the locations array\n  const locations = useMemo(() => [{\n    name: \"Gachibowli\",\n    lat: 17.4478,\n    lon: 78.3541\n  }, {\n    name: \"Kakinada\",\n    lat: 16.9335,\n    lon: 82.2377\n  }, {\n    name: \"Nizamabad\",\n    lat: 18.6741,\n    lon: 78.1025\n  }, {\n    name: \"Nalgonda\",\n    lat: 16.4440,\n    lon: 79.2755\n  }, {\n    name: \"Kadapa\",\n    lat: 14.4770,\n    lon: 78.8212\n  }, {\n    name: \"Rajahmundry\",\n    lat: 16.9888,\n    lon: 81.7784\n  }], []);\n  useEffect(() => {\n    if (mapContainerRef.current) {\n      mapRef.current = new maplibregl.Map({\n        container: mapContainerRef.current,\n        style: currentStyle,\n        center: [selectedLocation.lon, selectedLocation.lat],\n        zoom: 12\n      });\n      mapRef.current.addControl(new maplibregl.NavigationControl(), \"bottom-right\");\n\n      // Add initial marker\n      markerRef.current = [new maplibregl.Marker({\n        color: \"red\"\n      }).setLngLat([selectedLocation.lon, selectedLocation.lat]).setPopup(new maplibregl.Popup().setHTML(`<h3>${locations[0].name}</h3>`)).addTo(mapRef.current)];\n\n      // Add additional markers for other locations\n      locations.forEach(({\n        name,\n        lat,\n        lon\n      }) => {\n        const marker = new maplibregl.Marker({\n          color: \"red\"\n        }).setLngLat([lon, lat]).setPopup(new maplibregl.Popup().setHTML(`<h3>${name}</h3>`)).addTo(mapRef.current);\n        markerRef.current = [...markerRef.current, marker];\n        marker.getElement().addEventListener('click', () => handleMarkerClick(lat, lon));\n      });\n      return () => {\n        if (mapRef.current) {\n          mapRef.current.remove();\n        }\n      };\n    }\n  }, [currentStyle, locations, selectedLocation.lat, selectedLocation.lon]);\n  const handleStyleChange = newStyle => {\n    if (mapRef.current) {\n      setCurrentStyle(newStyle);\n      mapRef.current.setStyle(newStyle);\n      markerRef.current.forEach(marker => marker.setLngLat([selectedLocation.lon, selectedLocation.lat]));\n    }\n  };\n  const handleMarkerClick = (lat, lon) => {\n    if (mapRef.current) {\n      mapRef.current.flyTo({\n        center: [lon, lat],\n        zoom: 18 // Set the desired zoom level\n      });\n      markerRef.current.forEach(marker => {\n        if (marker.getLngLat().lng === lon && marker.getLngLat().lat === lat) {\n          marker.togglePopup();\n        } else {\n          marker.setPopup(null);\n        }\n      });\n      setSelectedLocation({\n        lat,\n        lon\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Container\",\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainerRef,\n      className: \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"layer-container\",\n      children: /*#__PURE__*/_jsxDEV(LayerComponent, {\n        onChange: handleStyleChange,\n        currentStyle: currentStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-component\",\n      children: /*#__PURE__*/_jsxDEV(SearchComponent, {\n        onLocationSelected: handleMarkerClick,\n        markerRef: markerRef,\n        selectedLocation: selectedLocation,\n        mapRef: mapRef.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"0178yshvWgBsDERG1EK2rz/FqZY=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","maplibregl","LayerComponent","SearchComponent","jsxDEV","_jsxDEV","MapComponent","_s","mapContainerRef","mapRef","markerRef","currentStyle","setCurrentStyle","process","env","REACT_APP_MAPTILER_API_KEY","selectedLocation","setSelectedLocation","lat","lon","locations","name","current","Map","container","style","center","zoom","addControl","NavigationControl","Marker","color","setLngLat","setPopup","Popup","setHTML","addTo","forEach","marker","getElement","addEventListener","handleMarkerClick","remove","handleStyleChange","newStyle","setStyle","flyTo","getLngLat","lng","togglePopup","className","position","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","onChange","onLocationSelected","_c","$RefreshReg$"],"sources":["/home/saisumasri/Desktop/FINAL_PROJECT/final/FRONTEND_CODE/src/Maps/Maps.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport maplibregl from \"maplibre-gl\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport LayerComponent from \"../Layers/LayerComponent\";\nimport \"../Maps/Maps.css\";\nimport SearchComponent from \"../Search/Search\";\n\nconst MapComponent: React.FC = () => {\n  const mapContainerRef = useRef<HTMLDivElement>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n  const markerRef: React.MutableRefObject<maplibregl.Marker[]> = useRef([]);\n  const [currentStyle, setCurrentStyle] = useState(\n    `${process.env.REACT_APP_MAPTILER_API_KEY}`\n  );\n  const [selectedLocation, setSelectedLocation] = useState<{\n    lat: number;\n    lon: number;\n  }>({ lat: 17.4478, lon: 78.3541 });\n\n  // Define the locations array\n  const locations = useMemo(\n    () => [\n      { name: \"Gachibowli\", lat: 17.4478, lon: 78.3541 },\n      { name: \"Kakinada\", lat: 16.9335, lon: 82.2377 },\n      { name: \"Nizamabad\", lat: 18.6741, lon: 78.1025 },\n      { name: \"Nalgonda\", lat: 16.4440, lon: 79.2755 },\n      { name: \"Kadapa\", lat: 14.4770, lon: 78.8212 },\n      { name: \"Rajahmundry\", lat: 16.9888, lon: 81.7784 },\n    ],\n    []\n  );\n\n  useEffect(() => {\n    if (mapContainerRef.current) {\n      mapRef.current = new maplibregl.Map({\n        container: mapContainerRef.current,\n        style: currentStyle,\n        center: [selectedLocation.lon, selectedLocation.lat],\n        zoom: 12,\n      });\n\n      mapRef.current.addControl(\n        new maplibregl.NavigationControl(),\n        \"bottom-right\"\n      );\n\n      // Add initial marker\n      markerRef.current = [\n        new maplibregl.Marker({ color: \"red\" })\n          .setLngLat([selectedLocation.lon, selectedLocation.lat])\n          .setPopup(\n            new maplibregl.Popup().setHTML(`<h3>${locations[0].name}</h3>`)\n          )\n          .addTo(mapRef.current!),\n      ];\n\n      // Add additional markers for other locations\n      locations.forEach(({ name, lat, lon }) => {\n        const marker = new maplibregl.Marker({ color: \"red\" })\n          .setLngLat([lon, lat])\n          .setPopup(new maplibregl.Popup().setHTML(`<h3>${name}</h3>`))\n          .addTo(mapRef.current!);\n        markerRef.current = [...markerRef.current, marker];\n        marker.getElement().addEventListener('click', () => handleMarkerClick(lat, lon));\n      });\n\n      return () => {\n        if (mapRef.current) {\n          mapRef.current.remove();\n        }\n      };\n    }\n  }, [currentStyle, locations, selectedLocation.lat, selectedLocation.lon]);\n\n  const handleStyleChange = (newStyle: string) => {\n    if (mapRef.current) {\n      setCurrentStyle(newStyle);\n      mapRef.current.setStyle(newStyle);\n\n      markerRef.current.forEach((marker) =>\n        marker.setLngLat([selectedLocation.lon, selectedLocation.lat])\n      );\n    }\n  };\n\n  const handleMarkerClick = (lat: number, lon: number) => {\n    if (mapRef.current) {\n      mapRef.current.flyTo({\n        center: [lon, lat],\n        zoom: 18, // Set the desired zoom level\n      });\n\n      markerRef.current.forEach((marker) => {\n        if (\n          marker.getLngLat().lng === lon &&\n          marker.getLngLat().lat === lat\n        ) {\n          marker.togglePopup();\n        } else {\n          marker.setPopup(null);\n        }\n      });\n\n      setSelectedLocation({ lat, lon });\n    }\n  };\n\n  return (\n    <div className=\"Container\" style={{ position: \"relative\" }}>\n      <div ref={mapContainerRef} className=\"map-container\" />\n      <div className=\"layer-container\">\n        <LayerComponent\n          onChange={handleStyleChange}\n          currentStyle={currentStyle}\n        />\n      </div>\n      <div className=\"search-component\">\n        <SearchComponent\n          onLocationSelected={handleMarkerClick}\n          markerRef={markerRef}\n          selectedLocation={selectedLocation}\n          mapRef={mapRef.current}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MapComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}